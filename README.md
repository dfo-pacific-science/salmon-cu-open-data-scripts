# salmon-cu-open-data-scripts

R scripts for extracting NuSEDS data for submission to Open Data
# CU Open Data Scripts

## Overview

This repository contains R scripts adapted from SQL queries used to extract and prepare Wild Salmon Policy (WSP) data from NuSEDS exports. The outputs are intended for publication to open data platforms.

## Scripts

- `wsp_status_extraction.R`: Extracts WSP Rapid and Integrated Status assessments for Pacific salmon Conservation Units.
- `cu_sites_extraction.R`: Extracts site-level information including coordinates, watershed codes, and CU identifiers.
- `cu_boundary_extraction.R`: Extracts CU-level metadata for mapping and boundary file generation.

## Folder Structure

scripts/   - R scripts for data extraction
data/      - Raw Excel files (excluded from GitHub via .gitignore)
output/    - CSV files generated by the scripts

## Usage

1. Place the required Excel files in the `data/` folder:
   - `cu_profile_vw.xlsx`
   - `conserv_unit_system_sites_mv.xlsx`
   - `Geo_Features.xlsx`

2. Open each script in RStudio and run it.

3. Each script will:
   - Register the Excel files as DuckDB tables
   - Run SQL queries (one at a time)
   - Save results as named data frames
   - Write outputs to CSV files in the `output/` folder

## Requirements

- R (â‰¥ 4.0)
- Packages:
  - `duckdb`
  - `readxl`

## Notes

- DuckDB can only execute one SQL `SELECT` query at a time. Each query is run separately.
- Raw data files are excluded from version control via `.gitignore`.
